<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>صفحة الإدارة</title>
<style>
  body { font-family: Arial, sans-serif; background:#111; color:#eee; direction:rtl; padding:20px; }
  h1 { color:#ffae00; text-align:center; }
  label { display:block; margin-top:15px; }
  input, button { margin-top:5px; padding:8px; border-radius:5px; border:none; width:100%; }
  button { background:#ffae00; color:#000; font-weight:bold; cursor:pointer; }
  .section { background:#222; padding:15px; border-radius:10px; margin-top:20px; }
  .preview { margin-top:10px; display:grid; grid-template-columns:repeat(auto-fit,minmax(80px,1fr)); gap:10px; }
  .preview img { width:80px; height:80px; object-fit:cover; border-radius:5px; }
</style>
</head>
<body>

<!-- زر الرجوع -->
<button onclick="window.location.href='index.html'" 
        style="background:#4da6ff; color:white; padding:10px 15px; border:none; border-radius:5px; cursor:pointer; font-weight:bold; margin-bottom:20px; width:auto;">
  ⬅ الرجوع إلى الرئيسية
</button>

<h1>لوحة إدارة الموقع</h1>

<div class="section">
  <h2>إضافة مطعم جديد</h2>
  <label>اسم المطعم:</label>
  <input type="text" id="restaurantName" />
  <label>صور المطعم (أسماء الملفات مفصولة بفاصلة):</label>
  <input type="text" id="restaurantImages" placeholder="مثال: img1.jpg,img2.jpg" />
  <button onclick="addRestaurant()">إضافة المطعم</button>
</div>

<div class="section">
  <h2>تعديل مطعم</h2>
  <label>اسم المطعم الحالي:</label>
  <input type="text" id="editCurrentName" placeholder="اكتب اسم المطعم الحالي" />
  <label>اسم جديد للمطعم:</label>
  <input type="text" id="editName" />
  <label>صور جديدة (أسماء مفصولة بفاصلة):</label>
  <input type="text" id="editImages" placeholder="مثال: img1.jpg,img2.jpg" />
  <button onclick="updateRestaurant()">حفظ التعديل</button>
</div>

<div class="section">
  <h2>حذف مطعم</h2>
  <label>اسم المطعم المراد حذفه:</label>
  <input type="text" id="deleteName" placeholder="اكتب اسم المطعم" />
  <button onclick="deleteRestaurant()">حذف المطعم</button>
</div>



<script>
function loadRestaurants(){
  let restaurants = JSON.parse(localStorage.getItem('restaurants')) || [];
  const preview = document.getElementById('restaurantsPreview');
  preview.innerHTML = '';
  
  restaurants.forEach(rest => {
    const restDiv = document.createElement('div');
    restDiv.style.marginBottom = '20px';
    restDiv.innerHTML = `<strong>${rest.name}</strong>`;
    const imagesDiv = document.createElement('div');
    imagesDiv.className = 'preview';
    rest.images.forEach(img => {
      const image = document.createElement('img');
      image.src = `images/${img}`;
      imagesDiv.appendChild(image);
    });
    restDiv.appendChild(imagesDiv);
    preview.appendChild(restDiv);
  });
}

function addRestaurant(){
  const name = document.getElementById('restaurantName').value.trim();
  const images = document.getElementById('restaurantImages').value.trim().split(',').map(s=>s.trim()).filter(Boolean);
  if(!name || images.length === 0) return alert('يرجى إدخال اسم المطعم والصور');
  let restaurants = JSON.parse(localStorage.getItem('restaurants')) || [];
  restaurants.push({ name, images });
  localStorage.setItem('restaurants', JSON.stringify(restaurants));
  loadRestaurants();
  document.getElementById('restaurantName').value = '';
  document.getElementById('restaurantImages').value = '';
}

function updateRestaurant(){
  const currentName = document.getElementById('editCurrentName').value.trim();
  const newName = document.getElementById('editName').value.trim();
  const newImages = document.getElementById('editImages').value.trim().split(',').map(s=>s.trim()).filter(Boolean);

  let restaurants = JSON.parse(localStorage.getItem('restaurants')) || [];
  let index = restaurants.findIndex(r => r.name === currentName);
  if(index === -1) return alert('المطعم غير موجود');

  if(newName) restaurants[index].name = newName;
  if(newImages.length > 0) restaurants[index].images = newImages;

  localStorage.setItem('restaurants', JSON.stringify(restaurants));
  loadRestaurants();
  alert('تم تعديل المطعم بنجاح');
}

function deleteRestaurant(){
  const name = document.getElementById('deleteName').value.trim();
  let restaurants = JSON.parse(localStorage.getItem('restaurants')) || [];
  let newRestaurants = restaurants.filter(r => r.name !== name);
  if(newRestaurants.length === restaurants.length) return alert('المطعم غير موجود');
  localStorage.setItem('restaurants', JSON.stringify(newRestaurants));
  loadRestaurants();
  alert('تم حذف المطعم');
}

document.addEventListener('DOMContentLoaded', loadRestaurants);
</script>

</body>
</html>
